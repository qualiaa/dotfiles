#!/bin/bash

LEFT=HDMI-2
RIGHT=DP-0

readonly I3_CONFIG="$HOME/.config/i3/config"

i3-settings() {
    tmp=$(mktemp)
    cat <(sed '/#</q' "$I3_CONFIG") - <(sed -n '/#>/,$p' "$I3_CONFIG") >"$tmp"
    mv "$tmp" "$I3_CONFIG"
}

set-side-monitor() {
    i3-settings <<EOF
workspace 8:www output $1
workspace 9:comms output ${2:-$1}
workspace 10:music output ${2:-$1}
EOF
}

xrandr \
    --output $LEFT --auto --primary \
    --output $RIGHT --auto --right-of $LEFT --rotate left
set-side-monitor "$RIGHT"

# Reload i3 if already started
{ pgrep -x i3 && i3-msg reload ; } >/dev/null 
